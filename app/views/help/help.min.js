myApp.config(["$stateProvider","$locationProvider","$urlRouterProvider","RouteHelpersProvider",function(n,t,i,r){n.state("app.help",{url:"/help/",title:"Help",templateUrl:r.basepath("help/help.html"),resolve:r.resolveFor("ngDialog")}).state("app.addhelp",{url:"/help/add",title:"Add Help",templateUrl:r.basepath("help/_form.html"),resolve:r.resolveFor("ngDialog")})}]),myApp.controller("HelpController",["$scope","$window","$stateParams","$filter","$http","$rootScope","ngDialog","toaster",function(n,t,i,r,u,f,e,o){n.breadcrumbs=[{name:"Help",url:"#",isActive:!1}],n.allParents={},n.childs={},n.contentChilds={},n.searchChilds={},n.showLoader=!0,n.id="",n.parenId="",n.name="",n.description="",n.sid="",n.sname="",n.sdescription="",n.showsearch=!1,n.search={},n.keywords="",n.increaseLevel=function(){n.level=n.level+1},n.initLevel=function(){n.level=1},n.getAllParents=function(){n.showsearch=!1,n.showLoader=!0;var t={token:f.token},i=f.com+"help/allparents";u.post(i,t).then(function(t){n.allParents=t.data.parents,n.childs=t.data.childs,n.showLoader=!1})},n.getChild=function(t){n.showLoader=!0;var i={pid:t,token:f.token},r=f.com+"help/childs";u.post(r,i).then(function(t){n.contentChilds=t.data,n.showLoader=!1})},n.getSearchChild=function(t){n.showLoader=!0;var i={pid:t,token:f.token},r=f.com+"help/childs";u.post(r,i).then(function(t){n.searchChilds=t.data,n.showLoader=!1})},n.showDetails=function(t,i,r){n.showsearch=!1,n.edithelp=!1,n.name=t,n.description=i,n.id=r,n.getChild(r)},n.showSearchDetails=function(t,i,r){n.showsearch=!0,n.sname=t,n.sdescription=i,n.sid=r,n.getSearchChild(r)},n.toggle_it=function(n){var t=n+"_1";angular.element("#"+t).css("display")=="none"?angular.element("#"+t).length&&(angular.element("#"+t).css("display","block"),angular.element("#"+n).removeClass("fa-angle-right"),angular.element("#"+n).addClass("fa-angle-down")):angular.element("#"+t).length&&(angular.element("#"+t).css("display","none"),angular.element("#"+n).removeClass("fa-angle-down"),angular.element("#"+n).addClass("fa-angle-right"))},n.toggle_parent=function(n){console.log(n);var t=n+"_1";angular.element("#"+t).css("display")=="none"?angular.element("#"+t).length&&(angular.element("#"+t).css("display","block"),angular.element("#"+n).removeClass("fa-angle-right"),angular.element("#"+n).addClass("fa-angle-down"),angular.element(".level1").removeClass("sidbar_active"),angular.element("#"+n+"_sidebar").addClass("sidbar_active")):angular.element("#"+t).length&&(angular.element("#"+t).css("display","none"),angular.element("#"+n).removeClass("fa-angle-down"),angular.element("#"+n).addClass("fa-angle-right"),angular.element(".level1").removeClass("sidbar_active"))},n.hideAllParents=function(){angular.element(".help-parents").hide()},n.toggleChild=function(n){angular.element("#"+n).css("display")=="none"?angular.element("#"+n).css("display","block"):angular.element("#"+n).css("display","none")},n.getSearch=function(){if($.trim(n.keywords)!=""){n.showLoader=!0;var t={keywords:n.keywords,token:f.token},i=f.com+"help/search";u.post(i,t).then(function(t){n.showsearch=!0,n.search=t.data,n.showLoader=!1})}else o.pop("error","Search","Please enter your keyword.")},n.formdata={},n.formdata.id="",n.formdata.name="",n.formdata.description="",n.formdata.parent="",n.addHelp=function(){var i,t,r,e;n.showLoader=!0,i=angular.element("#editorpanel iframe").attr("id"),t=angular.element("#"+i).contents().find("#tinymce").html(),$.trim(n.formdata.name)==""?o.pop("error","Search","Please enter module name."):$.trim(t)==""?o.pop("error","Search","Please enter module description."):(r={name:n.formdata.name,description:t,parent:n.formdata.parent,token:f.token},e=f.com+"help/add",u.post(e,r).then(function(){o.pop("success","Add Help","Module has been added successfully."),n.formdata.name="",n.formdata.parent="";var t=angular.element("#editorpanel iframe").attr("id"),i=angular.element("#"+t).contents().find("#tinymce").html("");n.getAllParents(),n.showLoader=!1}))},n.allItems={},n.getAllItems=function(){var t={token:f.token},i=f.com+"help/allitems";u.post(i,t).then(function(t){n.allItems=t.data})},n.edithelp=!1,n.deleteHelp=function(){n.showLoader=!0;var t={id:n.id,token:f.token},i=f.com+"help/delete";u.post(i,t).then(function(){o.pop("success","Delete Help","Module has been deleted successfully."),n.name="",n.description="";var t=angular.element("#editorpanel iframe").attr("id"),i=angular.element("#"+t).contents().find("#tinymce").html("");n.id="",n.getAllParents(),n.showLoader=!1})},n.getHelp=function(){var t={id:n.id,token:f.token},i=f.com+"help/item";u.post(i,t).then(function(t){n.formdata.name=t.data.name;var i=angular.element("#editorpanel iframe").attr("id");angular.element("#"+i).contents().find("#tinymce").html(t.data.description),n.formdata.parent=t.data.parent})},n.showEdit=function(){n.showLoader=!0,n.edithelp=!0,n.getHelp(),n.showLoader=!1},n.editHelp=function(){var i,t,r,e;n.showLoader=!0,i=angular.element("#editorpanel iframe").attr("id"),t=angular.element("#"+i).contents().find("#tinymce").html(),$.trim(n.formdata.name)==""?o.pop("error","Search","Please enter module name."):$.trim(t)==""?o.pop("error","Search","Please enter module description."):(r={id:n.id,name:n.formdata.name,description:t,parent:n.formdata.parent,token:f.token},e=f.com+"help/edit",u.post(e,r).then(function(){o.pop("success","Edit Help","Module has been edited successfully."),n.formdata.name="",n.formdata.parent="",n.description="";var t=angular.element("#editorpanel iframe").attr("id"),i=angular.element("#"+t).contents().find("#tinymce").html("");n.getAllParents(),n.edithelp=!1,n.showLoader=!1}))},n.cancelHelp=function(){n.edithelp=!1}}])