
<div class="modal fade" id="salesPersonModal" tabindex="-1"
     role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div ng-class="{'whirl no-overlay':showLoader}"></div>
    <div ng-class="{'loader_pop':loader_pop}"></div>
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">{{title}}</h4>
            </div>
            <div class="modal-body">
                <div ng-show="showsaleperson"><!--get_department_list(); get_region_list();
                     ng-init="get_employee_type_list();"-->
                    <div class="row">
                        <div>
                            <div class="col-md-4">
                                <!--<label class="  control-label"> Search</label>-->

                                <div>
                                    <div class="input-symbol">
                                        <input type="text" Placeholder="Search" class="form-control"
                                               ng-model="searchKeyword.$">
                                    <span id="date_msg_4">
                                        <i class="fa fa-search"></i>
                                    </span>
                                    </div>
                                </div>
                            </div>
                            <!--<div class="col-md-3" >
                              <label class="  control-label">Region </label>
                              <div class=" ">
                                <select  ng-model="searchKeyword.region"     class=" form-control"    >
                                  <option style="display:block" value=""></option>
                                  <option ng-repeat="value in region_customer_arr"
                                 value="{{value.title}}">{{value.title}} </option>
                                </select>
                              </div>
                            </div>-->
                            <!--<div class="col-md-2">
                                <label class="  control-label">Depatment </label>

                                <div class=" ">
                                    <select ng-model="searchKeyword.department" class=" form-control">
                                        <option style="display:block" value=""></option>
                                        <option ng-repeat="value in deprtment_arr"
                                                value="{{value.name}}">{{value.name}}
                                        </option>
                                    </select>
                                </div>
                            </div>-->
                            <div class="col-md-3">
                                <!--<label class="  control-label">Emp Type </label>-->

                                <div class=" ">
                                    <!--<select ng-model="searchKeyword.employee_type" class=" form-control">
                                        <option style="display:block" value=""></option>
                                        <option ng-repeat="value in emp_type_arr"
                                                value="{{value.name}}">{{value.name}}
                                        </option>
                                    </select>-->
                                    <select ng-model="searchKeyword.employee_type"
                                            ng-options="opt as opt.name for opt in emp_type_arr" class=" form-control">
                                        <option value="" disabled="" selected="" class="">Employment Type</option>
                                        <option style="display:block" value=""></option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-1">
                                <!--<label class="  control-label"> </label>

                                <div style="margin-top:4px;">
                                    <button type="button" class="btn btn-default" ng-click="searchKeyword=''"
                                            ng-model="strict">Clear
                                    </button>
                                </div>-->

                                <button type="button" class="btn btn-default m0auto"
                                        ng-click="searchKeyword=''" ng-model="strict" title="Clear Fields">
                                    <i class="fa fa-refresh"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                    <div class="col-md-12 col-md-12">
                        <div class="bs-example bs-example-tabs" data-example-id="togglable-tabs">
                            <div>
                                <table class="table table-striped table-bordered table-hover"
                                       ng-if="columns.length > 0">
                                    <thead>
                                    <tr class="bg-col">
                                        <th><input type="checkbox" class="checkAllSalesperson"></th>
                                        <th>Primary</th>
                                        <!--<th ng-repeat="column in columns"
                                          ng-if="column.title != 'Id' && column.field!= 'group_name' && column.field != 'Isprimary'"
                                          > {{column.title}} </th>-->
                                        <!--<th> Name</th>
                                        <th> Job Title</th>
                                        <th> Department</th>-->
                                        <th ng-repeat="column in columns"
                                            ng-if="column.title != 'Internal Extension' && column.title != 'Department' && column.title != 'Isprimary' && column.title != 'Chk' && column.title != '$$Hashkey' && column.title != 'Mobile' && column.title != 'Allow Login' && column.title != 'Status'"
                                            ng-hide="column.field == 'id' || column.field == 'type'">{{column.title}}
                                        </th>
                                    </tr>
                                    </thead>
                                    <tbody class="courser table-body">
                                    <tr ng-repeat="sp in salepersons | filter:searchKeyword:strict  track by $index ">
                                        <td>
                                            <input type="checkbox" ng-checked="sp.chk"
                                                   ng-click="selectSaleperson(sp,0)">
                                        </td>
                                        <td>
                                            <input type="radio" name="isPrimary"
                                                   ng-checked="sp.isPrimary" ng-click="selectSaleperson(sp,1)">
                                        </td>
                                        <!--<td>{{sp.first_name +' '+ sp.last_name}}</td>
                                        <td>{{sp.job_title}}</td>
                                        <td>{{sp.department}}</td>-->
                                        <td ng-repeat="column in columns"
                                            ng-if="column.title != 'Internal Extension' && column.title != 'Department' && column.title != 'Isprimary' && column.title != 'Chk' && column.title != '$$Hashkey' && column.title != 'Mobile' && column.title != 'Allow Login' && column.title != 'Status'"
                                            ng-hide="column.field == 'id'  ||  column.field == 'type'">
                                            <span> {{sp[column.field]}}</span>
                                        </td>
                                        <!--<td ng-repeat="column in columns"
                                         ng-if="column.title != 'Id' && column.field!= 'group_name' && column.field != 'Isprimary'"
                                         >{{sp[column.field]}}</td>-->
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                  </div>
                </div>
                <div class="row" ng-show="rec.id>0">
                    <div>
                      <div class="col-md-3">
                        <div class="input-symbol">
                            <input type="text" Placeholder="Search" class="form-control"
                                   ng-model="searchKeyword.search">
                            <span id="date_msg_4">
                                <i class="fa fa-search"></i>
                            </span>
                        </div>

                      </div>
                        <div class="col-md-3">
                            <div class=" ">
                                <!-- ng-change="get_customer_by_sale_person(rec.select_saleperson.id,1)"-->
                                <!--+'('+opt.isPrimary+')'-->
                                <select ng-model="rec.select_saleperson"
                                        ng-change="get_sale_person_exculde(rec.select_saleperson.id,1)"
                                        ng-options="opt as opt.name  for opt in dropdown_selectedsalespersons"
                                        class="form-control"><!--first_name-->
                                        <option value="" disabled="" selected="" class="">Select Salesperson </option>
                                    <option style="display:block" value=""></option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class=" ">
                                <select ng-model="rec.select_all_saleperson"
                                        ng-options="opt as opt.name for opt in salepersons_exculde"
                                        class="form-control"><!--first_name-->
                                        <option value="" disabled="" selected="" class="">Replace By Salesperson  </option>
                                    <option style="display:block" value=""></option>
                                </select>

                                <!-- <ui-select ng-model="rec.select_all_saleperson">
                                    <ui-select-match placeholder="Select Country">{{$select.selected.name}}</ui-select-match>
                                    <ui-select-choices repeat="opt in country_type_arr | filter: $select.search">
                                        <div ng-bind-html="opt.name | highlight: $select.search"></div>
                                    </ui-select-choices>
                                </ui-select> -->
                            </div>
                        </div>
                        <div class="col-md-1 pr0">
                        <button type="button" class="btn btn-default m0auto" title="Clear Fields">
                            <i class="fa fa-refresh" aria-hidden="true"></i>
                        </button>
                        </div>
                        <div class="col-smd-12 col-md-12" style="margin-top:7px;">
                            <div class="bs-example bs-example-tabs" data-example-id="togglable-tabs">
                                <div>
                                    <!--<table class="table table-striped table-bordered table-hover" ng-if="columns_saleperson.length > 0">
                                      <thead>
                                        <tr class="bg-col"> &nbsp;
                                            </th>
                                          <th ng-repeat="column in columns_saleperson"
                                          ng-if="column.title != 'Id'  && column.title!= 'Action' && column.title!= 'Type'"  > {{column.title}} </th>
                                        </tr>
                                      </thead>
                                      <tbody class="courser table-body">
                                        <tr    ng-repeat="cust in record_saleperson  track by $index  ">
                                          <td ng-repeat="column in columns_saleperson"
                                            ng-if="column.title != 'Id'  && column.title!= 'Action' && column.title!= 'Type'" >{{cust[column.field]}}</td>
                                        </tr>
                                         <tr ng-show="columns_saleperson.length == 0" style="text-align:center;">
                                        <td> No  Record Customer found  </td>
                                      </tr>
                                      </tbody>
                                    </table>-->

                                    <table class="table table-striped table-bordered table-hover"
                                           ng-if="columns_exclude.length > 0">
                                        <thead>
                                        <tr class="bg-col">
                                            <th><input type="checkbox" class="checkAllSalesperson"></th>
                                            <th>Primary</th>
                                            <!--<th ng-repeat="column in columns_exclude"
                                              ng-if="column.title != 'Id' && column.field!= 'group_name' && column.field != 'Isprimary'"
                                              > {{column.title}} </th>-->
                                            <!--<th> Name</th>
                                            <th> Job Title</th>
                                            <th> Department</th>-->
                                            <th ng-repeat="column in columns_exclude"
                                                ng-if="column.title != 'Internal Extension' && column.title != 'Department' && column.title != 'Isprimary' && column.title != 'Chk' && column.title != '$$Hashkey' && column.title != 'Mobile' && column.title != 'Allow Login' && column.title != 'Status'"
                                                ng-hide="column.field == 'id' || column.field == 'type'">
                                                {{column.title}}
                                            </th>
                                        </tr>
                                        </thead>
                                        <tbody class="courser table-body"><!--{{salepersons_exculde}}-->
                                        <tr ng-repeat="sp in salepersons_exculde | filter:searchKeyword.search  track by $index ">
                                            <td><input type="checkbox" ng-checked="sp.chk"
                                                       ng-click="selectSaleperson(sp,0)"></td>
                                            <td><input type="radio" name="isPrimary"
                                                       ng-checked="sp.isPrimary" ng-click="selectSaleperson(sp,1)"></td>
                                            <td> {{sp.code}}</td>
                                            <td> {{sp.name}}</td>
                                            <td> {{sp.job_title}}</td>
                                            <td> {{sp.Email}}</td>
                                            <td> {{sp.Telephone}}</td>
                                            <!--<td ng-repeat="column in columns"
                                                ng-if="column.title != 'Internal Extension' && column.title != 'Department' && column.title != 'Isprimary' && column.title != 'Chk' && column.title != '$$Hashkey' && column.title != 'Mobile' && column.title != 'Allow Login' && column.title != 'Status'"
                                                ng-hide="column.field == 'id' || column.field == 'type'">{{column.title}}
                                            </td>-->
                                            <!--<td ng-repeat="column in columns"
                                             ng-if="column.title != 'Id' && column.field!= 'group_name' && column.field != 'Isprimary'"
                                             >{{sp[column.field]}}</td>-->
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <span class="pull-left">Selected:&nbsp;{{(salepersons| filter: {chk: true}).length}}</span>
                <button class="btn btn_add" data-dismiss="modal"
                        ng-show="showsaleperson" ng-click="check_primary_sp()" type="button">Add
                </button>
                <button class="btn btn_add" data-dismiss="modal"
                        ng-show="rec.id>0" ng-click="rec.id>0 && update_salespersons(rec.id)" type="button">
                    Update
                </button>
                <button type="button" class="btn btn-cancel2" data-dismiss="modal">Cancel</button>
            </div>
        </div>
    </div>
</div>
