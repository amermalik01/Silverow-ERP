<div class="modal fade" id="InvoicesForAllocatedPayments" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog" style="margin-top:89px; width:60%">
        <div class="modal-content">
            <!-- Payment  -->
            <!-- ng-if="doc_type == 2" -->
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">{{postData.title}}</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-12">
                        <div class="col-md-4 no-padding">
                            <input type="text" Placeholder="Search" class="form-control ng-valid ng-dirty" ng-model="searchKeyword2">
                        </div>
                        <!-- <div class="col-md-8">
                            <span class="pull-right">
                                <strong> Remaining Amount to be Allocated :&nbsp;{{ netTotal() | number:decimal_range}} &nbsp;&nbsp;{{curency_code}}
                                    </strong>
                            </span>
                        </div> -->
                    </div>
                </div>
                <div class="row" style="margin-bottom: 0 !important;">
                    <div class="col-md-12 col-md-12">
                        <div class="bs-example bs-example-tabs" data-example-id="togglable-tabs">
                            <div class="panel-body">
                                <div>
                                    <table class="table table-striped table-bordered table-hover">
                                        <thead class="fixit">
                                            <tr class="bg-col">
                                                <th> Posting Date </th>
                                                <th> Document Type </th>
                                                <th> Document No. </th>
                                                <th> Order No. </th>
                                                <th class="text-right"> Original Amount</th>
                                                <th class="text-right"> Amount Settled</th>
                                                <th> Date Allocated </th>
                                            </tr>
                                        </thead>
                                        <tbody class="fixit">
                                            <tr ng-repeat="sp in ReciptInvoiceModalarrPaid |filter: searchKeyword2">
                                                <td> {{sp.invoice_date}} </td>
                                                <td> {{sp.payment_type}} </td>
                                                <td>
                                                    <!-- <span ng-if="module_type.value == 2"> -->
                                                    <span ng-if="sp.payment_type == 'Sales Invoice'">
                                                        <a title="Sale Invoice" class="tooltips_clss btn hilight " style="font-size: 11px;" 
                                                            ui-sref="app.viewOrder({id:sp.order_id, isInvoice:1})" target="_blank">
                                                            {{sp.code}}</a>
                                                    </span>
                                                    <span ng-if="sp.payment_type == 'Credit Note'">
                                                        <a title="Credit Note" class="tooltips_clss btn hilight " style="font-size: 11px;" 
                                                            ui-sref="app.viewReturnOrder({id:sp.order_id, isInvoice:1})" target="_blank">
                                                            {{sp.code}}</a>
                                                    </span>

                                                    <span ng-if="sp.payment_type == 'Purchase Invoice'">
                                                         <a title="Purchase Invoice" class="tooltips_clss btn hilight " style="font-size: 11px;" ui-sref="app.viewsrmorder({id:sp.order_id})" target="_blank" >
                                                            {{sp.code}}</a>
                                                    </span>
                                                    <span ng-if="sp.payment_type == 'Debit Note'">
                                                         <a title="Debit Note" class="tooltips_clss btn hilight " style="font-size: 11px;" 
                                                            ui-sref="app.viewsrmorderreturn({id:sp.order_id})" target="_blank" >
                                                            {{sp.code}}</a>
                                                    </span>
                                                    <span ng-if="sp.payment_type == 'Opening Balance Invoice'">
                                                    
                                                         <a title="Opening Balance Invoice" class="tooltips_clss btn hilight " style="font-size: 11px;" 
                                                            ui-sref="app.openingBalances({module:moduleName})" target="_blank" >
                                                            {{sp.code}}</a>
                                                    </span>
                                                    <span ng-if="sp.payment_type == 'Bank Opening Balance Payment' || sp.payment_type == 'Bank Opening Balance Refund'">
                                                    
                                                         <a title="{{sp.payment_type}}" class="tooltips_clss btn hilight " style="font-size: 11px;" 
                                                            ui-sref="app.openingBalances({module:'bank'})" target="_blank" >
                                                            {{sp.code}}</a>
                                                    </span>

                                                    <span ng-if="module_type.value == 2">
                                                        <span ng-if="sp.payment_type == 'Refund'">                                                            
                                                            <a title="{{moduleName | capitalize}} Refund" class="tooltips_clss btn hilight " style="font-size: 11px;" 
                                                                ui-sref="app.view-receipt-journal-gl-cust({id:sp.order_id})" target="_blank">
                                                                {{sp.code}}</a>
                                                        </span>

                                                    <span ng-if="sp.payment_type == 'Payment'">
                                                            <a title="{{moduleName | capitalize}} Payment" class="tooltips_clss btn hilight " style="font-size: 11px;" 
                                                                ui-sref="app.view-receipt-journal-gl-cust({id:sp.order_id})" target="_blank" >
                                                                {{sp.code}}</a>
                                                            
                                                        </span>

                                                    <span ng-if="sp.payment_type == 'Opening Balance Credit Note'">
                                                        
                                                            <a title="Opening Balance Credit Note" class="tooltips_clss btn hilight " style="font-size: 11px;" 
                                                                ui-sref="app.openingBalances({module:moduleName})" target="_blank" >
                                                                {{sp.code}}</a>
                                                        </span>
                                                    </span>
                                                    <span ng-if="module_type.value == 3">
                                                        <span ng-if="sp.payment_type == 'Refund'">
                                                            
                                                            <a title="{{moduleName | capitalize}} Refund" class="tooltips_clss btn hilight " style="font-size: 11px;" 
                                                                ui-sref="app.view-receipt-journal-gl-supp({id:sp.order_id})" target="_blank">
                                                                {{sp.code}}</a>
                                                        </span>

                                                    <span ng-if="sp.payment_type == 'Payment'">
                                                            <a title="{{moduleName | capitalize}} Payment" class="tooltips_clss btn hilight " style="font-size: 11px;" 
                                                                ui-sref="app.view-receipt-journal-gl-supp({id:sp.order_id})" target="_blank" >
                                                                {{sp.code}}</a>
                                                            
                                                        </span>

                                                    <span ng-if="sp.payment_type == 'Opening Balance Debit Note'">
                                                        
                                                            <a title="Opening Balance Debit Note" class="tooltips_clss btn hilight " style="font-size: 11px;" 
                                                                ui-sref="app.openingBalances({module:moduleName})" target="_blank" >
                                                                {{sp.code}}</a>
                                                        </span>
                                                    </span>
                                                </td>
                                                <td>
                                                    <!-- <span ng-if="module_type.value == 2"> -->
                                                    <span ng-if="sp.payment_type == 'Sales Invoice'">
                                                        <a title="Sale Invoice" class="tooltips_clss btn hilight " style="font-size: 11px;" 
                                                            ui-sref="app.viewOrder({id:sp.order_id, isInvoice:1})" target="_blank">
                                                            {{sp.order_code}}</a>
                                                    </span>
                                                    <span ng-if="sp.payment_type == 'Credit Note'">
                                                        <a title="Credit Note" class="tooltips_clss btn hilight " style="font-size: 11px;" 
                                                            ui-sref="app.viewReturnOrder({id:sp.order_id, isInvoice:1})" target="_blank">
                                                            {{sp.order_code}}</a>
                                                    </span>

                                                    <span ng-if="sp.payment_type == 'Purchase Invoice'">
                                                         <a title="Purchase Invoice" class="tooltips_clss btn hilight " style="font-size: 11px;" ui-sref="app.viewsrmorder({id:sp.order_id})" target="_blank" >
                                                            {{sp.order_code}}</a>
                                                    </span>
                                                    <span ng-if="sp.payment_type == 'Debit Note'">
                                                         <a title="Debit Note" class="tooltips_clss btn hilight " style="font-size: 11px;" 
                                                            ui-sref="app.viewsrmorderreturn({id:sp.order_id})" target="_blank" >
                                                            {{sp.order_code}}</a>
                                                    </span>
                                                    <span ng-if="sp.payment_type == 'Opening Balance Invoice'">
                                                    
                                                         <a title="Opening Balance Invoice" class="tooltips_clss btn hilight " style="font-size: 11px;" 
                                                            ui-sref="app.openingBalances({module:moduleName})" target="_blank" >
                                                            {{sp.order_code}}</a>
                                                    </span>
                                                    <span ng-if="sp.payment_type == 'Bank Opening Balance Payment' || sp.payment_type == 'Bank Opening Balance Refund'">
                                                    
                                                         <a title="{{sp.payment_type}}" class="tooltips_clss btn hilight " style="font-size: 11px;" 
                                                            ui-sref="app.openingBalances({module:'bank'})" target="_blank" >
                                                            {{sp.order_code}}</a>
                                                    </span>

                                                    <span ng-if="module_type.value == 2">
                                                        <span ng-if="sp.payment_type == 'Refund'">                                                            
                                                            <a title="{{moduleName | capitalize}} Refund" class="tooltips_clss btn hilight " style="font-size: 11px;" 
                                                                ui-sref="app.view-receipt-journal-gl-cust({id:sp.order_id})" target="_blank">
                                                                {{sp.order_code}}</a>
                                                        </span>

                                                    <span ng-if="sp.payment_type == 'Payment'">
                                                            <a title="{{moduleName | capitalize}} Payment" class="tooltips_clss btn hilight " style="font-size: 11px;" 
                                                                ui-sref="app.view-receipt-journal-gl-cust({id:sp.order_id})" target="_blank" >
                                                                {{sp.order_code}}</a>
                                                            
                                                        </span>

                                                    <span ng-if="sp.payment_type == 'Opening Balance Credit Note'">
                                                        
                                                            <a title="Opening Balance Credit Note" class="tooltips_clss btn hilight " style="font-size: 11px;" 
                                                                ui-sref="app.openingBalances({module:moduleName})" target="_blank" >
                                                                {{sp.order_code}}</a>
                                                        </span>
                                                    </span>
                                                    <span ng-if="module_type.value == 3">
                                                        <span ng-if="sp.payment_type == 'Refund'">
                                                            
                                                            <a title="{{moduleName | capitalize}} Refund" class="tooltips_clss btn hilight " style="font-size: 11px;" 
                                                                ui-sref="app.view-receipt-journal-gl-supp({id:sp.order_id})" target="_blank">
                                                                {{sp.order_code}}</a>
                                                        </span>

                                                    <span ng-if="sp.payment_type == 'Payment'">
                                                            <a title="{{moduleName | capitalize}} Payment" class="tooltips_clss btn hilight " style="font-size: 11px;" 
                                                                ui-sref="app.view-receipt-journal-gl-supp({id:sp.order_id})" target="_blank" >
                                                                {{sp.order_code}}</a>
                                                            
                                                        </span>

                                                    <span ng-if="sp.payment_type == 'Opening Balance Debit Note'">
                                                        
                                                            <a title="Opening Balance Debit Note" class="tooltips_clss btn hilight " style="font-size: 11px;" 
                                                                ui-sref="app.openingBalances({module:moduleName})" target="_blank" >
                                                                {{sp.order_code}}</a>
                                                        </span>
                                                    </span>
                                                </td>
                                                <td class="text-right">{{ sp.original_amount| number:decimal_range }}&nbsp;{{sp.currency_code}}</td>
                                                <td class="text-right">{{ sp.paid_amount| number:decimal_range }}&nbsp;{{sp.currency_code}}
                                                </td>
                                                <td> {{sp.allocation_date}} </td>
                                            </tr>
                                            <tr ng-show="ReciptInvoiceModalarrPaid.length == 0">
                                                <td colspan="3" text-align="center"> No records found ! </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <div class="pull-left text-left">
                    <b> Total Amount:</b>
                    <span style="margin-right: 20px;">{{ total_amount | number:decimal_range }}
                            <span style="margin-left: 3px;margin-right: 3px;">{{currency_code}}</span>
                    </span>

                    <b> Settled Amount:</b>
                    <span style="margin-right: 20px;"> {{ total_setteled | number:decimal_range }}
                            <span style="margin-left: 3px;margin-right: 3px;">{{currency_code}}</span>
                    </span>

                    <b> Remaining Amount:</b>
                    <span style="margin-right: 20px;">{{ total_amount - total_setteled | number:decimal_range }}
                            <span style="margin-left: 3px;margin-right: 3px;">{{currency_code}}</span>
                    </span>
                </div>
                <!-- <div class="pull-left">
                        <span class="margin-right"><i class="fa fa-circle" style="color:#ef7372"></i> Zero Allocation </span>
                        <span class="margin-right"><i class="fa fa-circle" style="color:#ffd351"></i> Partially Allocated </span> 
                        <span class="margin-right"><i class="fa fa-circle" style="color:#25b726"></i> Fully Allocated </span> 
                </div>
                <strong>
                    <span ng-if="netTotal() < 0" style="color:    rgba(255, 0, 0, 0.78);"> Limit Exceed</span>
                    </span>
                </strong>
                <button class="btn btn-submit2" type="button" ng-click="AddPaymentAllocation(module_type.value, doc_type)" 
                ng-class="{'dont-click2':netTotal() < 0}">Save </button> -->
                <button type="button" class="btn btn-cancel" data-dismiss="modal">Cancel</button>
            </div>
        </div>
        <!-- Refund  -->
        <!-- <div class="modal-content" ng-if="doc_type == 3">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">{{postData.title}}</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-12">
                        <div class="col-md-5 no-padding">
                            <input type="text" Placeholder="Search" class="form-control ng-valid ng-dirty" ng-model="searchKeyword2">
                        </div>
                        <div class="col-md-7"> <span class="pull-right"> <strong> Remaining Amount to be Refund :&nbsp;{{netTotalrefund() | number:decimal_range}} </strong> </span></div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12 col-md-12">
                        <div class="bs-example bs-example-tabs" data-example-id="togglable-tabs">
                            <div class="panel-body">
                                <table class="table table-striped table-bordered table-hover" ng-if="ReciptInvoiceModalarr.length > 0">
                                    <thead>
                                        <tr class="bg-col">
                                            <th>Date</th>
                                            <th>Total Amount</th>
                                            <th>Remaining Amount</th>
                                            <th> Refund Amount</th>
                                            <th> Refund In Full</th>
                                        </tr>
                                    </thead>
                                    <tbody class="courser table-body">
                                        <tr ng-repeat="sp in ReciptInvoiceModalarr|filter: searchKeyword2">
                                            <td> {{sp.invoice_date}}</td>
                                            <td> {{sp.grand_total| number:decimal_range }}</td>
                                            <td> {{ sp.outstanding_amount | number:decimal_range }} </td>
                                            <td><input type="text" data-parsley-trigger="keyup" ng-model="sp.amount" ng-blur="netTotalrefund(); setremianrefund(sp)"
                                                    class="in-t-1 input_text" data-parsley-minlength-message="Invalid Value"
                                                    data-parsley-type-message="Invalid Value" data-parsley-error-message="Invalid Value"
                                                    data-parsley-pattern="/^(?=.*[1-9])\d{0,25}(?:\.\d{0,25})?$/">

                                                </ul>
                                            </td>
                                            <td><input type="checkbox" id="checkremaingamountrefund_{{sp.id}}" ng-click="setremianrefund(sp)"></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">

                <button class="btn btn_add" ng-click="addrecptget_invoice()" type="button" ng-class="{'dont-click':netTotalrefund() < 0}">Save </button>
                <button type="button" class="btn btn-cancel" data-dismiss="modal">Cancel</button>
            </div>
        </div> -->

    </div>
</div>