
<div class="modal fade" id="level_pop"  >
  <div class="modal-dialog  "  style=" width:75% !important"  ><!--modal-lg   style=" width:65% !important" -->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close"  data-dismiss="modal"  aria-label="Close"> <span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title"> Individual Level (s)</h4>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-md-12" ng-show="total_grand_show_level" > <a ng-if="allowadd_sale_target_module"id="prompt" ng-click="showadd_level_form()" class="btn btn_add pull-right"  >Add New</a> </div>
          <div class="col-md-12" ng-show="level_add_form"  >
            <form autocomplete="off"  class="form-horizontal no-margin" role="form"
 validate-form="" novalidate="">
              <input type="hidden" ng-model="formDatalevel.id"    />
              <div class="col-md-12">
                <div class="col-md-6">
                  <div class="form-group" >
                    <label class="col-md-4 control-label">Sales Person<span class="required">*</span></label>
                    <div class="col-md-7">
                      <input type="text" ng-model="formDatalevel.sale_person_name"  class="form-control ng-pristine ng-valid ng-touched"
			 readonly   >
                      <input type="hidden" ng-model="formDatalevel.sale_person_id"  class="form-control ng-pristine ng-untouched ng-valid">
                    </div>
                  </div>
                  <div class="form-group">
                    <label class="col-md-4 control-label ">Target <span ng-show="rec.fix_target_type.id==1">Amount</span> <span ng-show="rec.fix_target_type.id==2">Quantity</span> <span class="required">*</span> </label>
                    <div class="col-md-5">
                      <input  required ng-readonly="check_sale_target_readonly_level"
              type="text"   data-parsley-trigger="keyup"
            ng-model="formDatalevel.target_amount"
           class="form-control input_text" data-parsley-minlength-message="Invalid Value"
           data-parsley-type-message="Invalid Value"  data-parsley-error-message="Invalid Value"
            data-parsley-pattern="/^(?=.*[1-9])\d{0,25}(?:\.\d{0,25})?$/" >
                    </div>
                    <span  ng-show="rec.fix_target_type.id==1"class="ng-binding" style="   position: relative;    right: 40px;    top: 9px;"> {{defaultCurrencyCode}} </span>
                    <div class="col-md-2" ng-show="rec.fix_target_type.id==2">
                      <select ng-model="formDatalevel.target_uom" ng-options="opt as opt.title for opt in arr_target_uom" class=" form-control"    disabled   >
                      </select>
                    </div>
                  </div>
                  <!--<div class="form-group">
                  <label class="col-md-4 control-label">Product Type </label>
                  <div class="col-md-7">
                    <select ng-model="formDatalevel.product_promotion_type_id" ng-options="opt as opt.name for opt in arr_prod_promo_type" class=" form-control"       disabled  >
                      <option style="display:block" value=""></option>
                    </select>
                  </div>
                </div>-->
                  
                  <div class="form-group"  ng-if="formDatalevel.product_promotion_type_id.id>0">
                    <label class="col-md-4 control-label ">{{rec.product_promotion_type_id.name}} 
                      <!--{{formDatalevel.product_promotion_type_id.name}} -->(s) </label>
                    <div class="col-md-7">
                      <div class="panel-info no-margin" ng-class="{'dont-click readonly':check_sale_target_readonly_level}"  >
                        <div class="panel-body" ng-click="!check_sale_target_readonly_level && getProducts_level(0,rec.product_promotion_type_id.id)"

                        style="height:30px; overflow-y:auto;"> <span ng-repeat="prod in selectedProducts_level track by $index"> <span ng-if="$index == 0">{{prod.name}}</span> <span ng-if="$index > 0">,&nbsp;{{prod.name}}</span> </span> </div>
                      </div>
                    </div>
                  </div>
                  <!--<div class="form-group">
                  <label class="col-md-4 control-label">Target Type </label>
                  <div class="col-md-7">
                    <select ng-model="formDatalevel.target_type" ng-options="opt as opt.name for opt in arr_sale_type" class=" form-control"     disabled  >
                      <option style="display:block" value=""></option>
                    </select>
                  </div>
                </div>-->
                  <div class="form-group"  ng-if="formDatalevel.target_type.id >0">
                    <label class="col-md-4 control-label "> {{rec.target_type.name}} 
                      
                      <!--{{formDatalevel.target_type.name}}-->(s) </label>
                    <div class="col-md-7">
                      <div class="panel-info no-margin"
                         ng-class="{'dont-click readonly':check_sale_target_readonly_level}" >
                        <div class="panel-body" ng-click="!check_sale_target_readonly_level && getGroups_rg_level(0,rec.target_type.id)"
 
                        style="height:30px; overflow-y:auto;"> <span ng-repeat="cust in selectedGroups_rg_level track by $index"> <span ng-if="$index == 0">{{cust.name}}</span> <span ng-if="$index > 0">,&nbsp;{{cust.name}}</span> </span> </div>
                      </div>
                    </div>
                  </div>
                  <div class="form-group">
                    <label class="col-md-4 control-label">Start Date <span class="required">*</span></label>
                    <div class="col-md-7">
                      <input jqdatepicker class="2date-picker form-control "   id="sldate"
                  ng-model="formDatalevel.start_date"
ng-change="testdate_by_id('sldate','eldate','date_msg_sdatel');testdate_between_two_dates_by_am(formDatalevel.level_check_sdate,formDatalevel.level_check_edate,formDatalevel.start_date,'date_blocsl')"
 
                required readonly="" >
                      <span class="fa fa-calendar  new_ca  form-control-feedback"></span> <span    id="date_msg_sdatel" style="color:#F00; display: none;"  >start Date is earlier  then Start Date</span> </div>
                  </div>
                  <div class="form-group">
                    <label class="col-md-4 control-label">End Date <span class="required">*</span></label>
                    <div class="col-md-7"><!--date-picker-->
                      <input jqdatepicker class="2date-picker form-control "  id="eldate"
                  ng-model="formDatalevel.end_date"
ng-change="testdate_by_id('sldate','eldate','date_msg_sdatel');testdate_between_two_dates_by_am(formDatalevel.level_check_sdate,formDatalevel.level_check_edate,formDatalevel.end_date,'date_blockel')"
                  required readonly="" >
                      
                      <!--testdate_between_two_dates_by_angular_model(level_sdate,level_edate,formDatalevel.start_date,'date_blocsl')
testdate_between_two_dates_by_id('sdate','edate','eldate','date_blockel')--> 
                      
                      <span class="fa fa-calendar  new_ca  form-control-feedback"></span> <span id="date_blocksl"
                  style="color:#F00; display: none;"  > Date Must be between Start and End Date of Target</span> <span id="date_blockel"  style="color:#F00; display: none;"  > Date Must be between Start and End Date of Target</span> </div>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-group">
                    <label class="col-md-4 control-label">Additional Commission </label>
                    <div class="col-md-5">
                      <label ng-repeat="choice in arr_type_commision" style="    margin-right: 5px;  margin-top:7px;">
                        <input type="radio" name="commission_typed" ng-model="formDatalevel.commission_type"
                  ng-value="choice.id"  ng-disabled="check_sale_target_readonly_level" />
                        {{choice.name}} </label>
                    </div>
                    <div class="col-md-3  "  ng-show="formDatalevel.commission_type==1 "> <span class="highlight-focus btn  pull-right animated fadeInLeft"  style="height: 30px;     width: 128px !important;" type="button"   
                      ng-class="{'setshow':showdatac_levelc==1}"
              
                ng-click="!check_sale_target_readonly_level && show_popup_commision(5,rec.fix_target_type.id)"> <i class="material-icons a-t-l">&#xE8EF;</i> <em class="icon-name">Commission</em> </span> </div>
                  </div>
                  <div class="form-group">
                    <label class="col-md-4 control-label">Additional Bonus </label>
                    <div class="col-md-5">
                      <label ng-repeat="choice in arr_type_bonus" style="    margin-right: 5px; margin-top:7px;">
                        <input type="radio" name="bonus_typed" ng-model="formDatalevel.bonus_type"
                  ng-value="choice.id" ng-disabled="check_sale_target_readonly_level"/>
                        {{choice.name}} </label>
                    </div>
                    <div class="col-md-3  " ng-show="formDatalevel.bonus_type==1 "> <span class="highlight-focus btn pull-right animated fadeInLeft" type="button" style="height: 30px;  width: 128px !important;"
                ng-class="{'setshow':showdatac_levelb==1}"
               ng-click="!check_sale_target_readonly_level && show_popup_commision(6,rec.fix_target_type.id)"> <i class="material-icons a-t-l">&#xE896;</i> <em class="icon-name">Bonus</em> </span> </div>
                  </div>
                  <div class="form-group">
                    <label class="col-md-4 control-label">Created Date </label>
                    <div class="col-md-7">
                      <input class=" form-control "     ng-model="formDatalevel.created_date" 
                    readonly="" >
                    </div>
                  </div>
                  <div class="form-group">
                    <label class="col-md-4 control-label">Status </label>
                    <div class="col-md-7">
                      <select ng-model="formDatalevel.status" ng-options="opt as opt.label for opt in arr_status" class=" form-control"  ng-disabled="check_sale_target_readonly_level" id="status"  >
                      </select>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-12"ng-show="level_add_form">
                <div class="pull-right">
                  <button class="btn btn-submit   date_msg_sdatel  b_date_blocksl b_date_blockel " type="submit"
      ng-show="!check_sale_target_readonly_level"ng-click="add_level();" > Save </button>
                  <button class="btn btn-edit" type="button"  ng-click="showEditForm_level()"
      ng-show="check_sale_target_readonly_level">Edit</button>
                  <button class="btn btn-cancel" type="button" ng-click="hideadd_level_form();">Cancel</button>
                </div>
              </div>
            </form>
          </div>
          <div class="clearfix" style="margin-top:40px;"></div>
          <div  ng-show="level_all_list" >
            <div class="col-md-12">
              <div class="table-responsive"> 
                <!--    View    permision for Company User /superadmin      -->
                <table ng-table="table.tableParams5" class="table table-condensed table-striped table-hover table-bordered" id="data-table" show-filter="true" ng-if="allowview_sale_target_module==1" >
                  <thead >
                    <tr   ng-show="columns_level_record.length > 0" > 
                      <!--   <th ng-repeat="column in columns_level_record"
  class="sortable sort-asc" ng-class="{ 'sort-asc': table.tableParams5.isSortBy(column.field, 'asc'),   'sort-desc': !table.tableParams5.isSortBy(column.field, 'desc')   }"
    ng-click="table.tableParams5.sorting(column.field, tableParams.isSortBy(column.field, 'asc') ? 'desc' : 'asc')"

      ng-if="column.title!= 'Id' && column.title!= 'Action'&& column.title!= 'Sid'"  sortable="column.title"
      > {{column.title}} </th>-->
                      
                      <th style=" width:15% !important; ">Sale Person </th>
                      <th style=" width:15% !important; ">Amount </th>
                      <th style=" width:15% !important; " >Commission</th>
                      <th style=" width:15% !important; " >Bonus</th>
                      <th style=" width:15% !important; " >Start date</th>
                      <th style=" width:15% !important; " >End date</th>
                      <th    style="width: 7%;">Action</th>
                    </tr>
                  </thead>
                  <tbody class="table-body courser ">
                    <!--<tr ng-repeat="rec in level_record  | filter:searchKeyword2:strict  track by $index "> ng-show="columns_level_record.length > 0" >
              <td ng-repeat="column in columns_level_record"

                 ng-if="column.title!= 'Id' && column.title!= 'Action' && column.title!= 'Sid'"
                 ><span ng-if="column.field != 'start_date' && column.field != 'end_date'"> {{rec[column.field]}}</span> <span ng-if="column.field == 'start_date' || column.field == 'end_date'"> <span ng-if=" rec[column.field] != 0 "> {{convert_unix_date_to_angular(rec[column.field])}} </span></span></td>
              <td    ><a title="Open " 
               ng-click="open_level_pop(rec)" class="tooltips_cls btn "> <i class="fa fa-eye"></i> </a> <a title="Edit"  ng-click="edit_sale_detail(rec.id)" class="tooltips_cls btn "> <i class="fa fa-edit"></i> </a> <a title="Delete"   ng-click="delete_level_record(rec.id,$index,level_record)" class="tooltips_cls btn "> <i class="fa fa-times"></i> </a></td>
            </tr>-->
                    
                    <tr   data-ng-repeat="formDataExpense in level_record  | filter:searchKeyword2:strict  track by $index "  
                      ng-show="columns_level_record.length>0"  >
                      <td     > {{formDataExpense.sale_person_name}} </td>
                      <td     > {{formDataExpense.target_amount}} {{formDataExpense.unit}} </td>
                      <td style="width:14%"  > {{formDataExpense.commission}} </td>
                      <td style="width:14%"  > {{formDataExpense.bonus}} </td>
                      <td style="width:17%"> {{formDataExpense.start_date}} </td>
                      <td style="width:14%"  > {{formDataExpense.end_date}} </td>
                      <td    ><!--   Edit    permision for Company User /superadmin --> 
                        <a title="Edit"    ng-class="{'dont-click':allowedit_sale_target_module==0}"  ng-click="edit_level(formDataExpense.id)" class="tooltips_cls btn "> <i class="fa fa-edit"></i> </a> 
                        
                        <!--    Delete   permision for Company User /superadmin --> 
                        <a title="Delete" ng-if="allowdelete_sale_target_module==1"   ng-click="delete_level(formDataExpense.id,$index,level_record)" class="tooltips_cls btn "> <i class="fa fa-times"></i> </a></td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-cancel" data-dismiss="modal" >Cancel</button>
      </div>
    </div>
  </div>
</div>
