<div class="row">
    <div class="col-md-12">
        <div class="widget">
            <div class="widget-body padb0">
                <div class="row">
                    <div class="col-md-12">
                        <div class="panel-title2">General</div>
                        <div class="col-md-5">
                            <div class="form-group">
                                <label class="col-md-4 control-label">SRM No.<span ng-if="moduleCodeType == 1"
                                          class="required">*</span></label>

                                <div class="col-md-8">
                                    <input type="hidden" ng-model="rec.type" />

                                    <input ng-readonly="product_type" class="form-control" type="text" ng-model="rec.srm_code" ng-if="moduleCodeType == 0" />

                                    <input type="text" class="form-control" required ng-model="rec.srm_code" ng-readonly="check_srm_readonly" ng-if="moduleCodeType == 1" />

                                    <input type="hidden" ng-model="rec.code_type" />
                                    <input type="hidden" ng-model="rec.srm_no" />
                                </div>
                            </div>
                            <div class="form-group">
                                <input type="hidden" id="id" ng-model="rec.id" class="form-control" />
                                <label class="col-md-4 control-label">Name
                                    <span class="required">*</span>
                                </label>

                                <div class="col-md-8">
                                    <input type="text" ng-model="rec.name" id="name" class="form-control" ng-readonly="check_srm_readonly" required />
                                </div>
                            </div>
                            <!--<div class="form-group">
                                <label class="col-md-4 control-label">Previous SRM Code </label>

                                <div class="col-md-8">
                                    <input type="text" ng-model="rec.prev_code" id="prev_code" class="form-control"
                                           ng-readonly="check_srm_readonly"/>
                                </div>
                            </div>-->
                            <div class="form-group">
                                <label class="col-md-4 control-label">Address Line 1</label>

                                <div class="col-md-8">
                                    <input type="text" ng-model="rec.address_1" id="address" class="form-control" ng-readonly="check_srm_readonly" placeholder="Address Line 1" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-md-4 control-label">Address Line 2 </label>

                                <div class="col-md-8">
                                    <input type="text" ng-model="rec.address_2" id="address_2" class="form-control" ng-readonly="check_srm_readonly" placeholder="Address Line 2" />
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="col-md-4 control-label"></label>

                                <div class="col-md-4 padr6">
                                    <input type="text" ng-model="rec.city" id="city" class="form-control" ng-readonly="check_srm_readonly" / placeholder="City" title="City">
                                </div>
                                <div class="col-md-4 padl6">
                                    <input type="text" ng-model="rec.county" id="county" class="form-control" placeholder="County" ng-readonly="check_srm_readonly" title="County" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-md-4 control-label">
                                    <!--<span class="required">*</span> -->
                                </label>

                                <div class="col-md-4 padr6">
                                    <input type="text" ng-model="rec.postcode" id="postcode" class="form-control crm-postcode" ng-readonly="check_srm_readonly" placeholder="Postcode" title="Postcode" />
                                    <!--required-->
                                </div>
                                <div class="col-md-4 padl6">
                                    <ui-select ng-model="drp.country_id" ng-disabled="check_srm_readonly">
                                        <ui-select-match placeholder="Select Country">{{$select.selected.name}}
                                        </ui-select-match>
                                        <ui-select-choices repeat="opt in country_type_arr | filter: $select.search">
                                            <div ng-bind-html="opt.name | highlight: $select.search"></div>
                                        </ui-select-choices>
                                    </ui-select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-md-4 control-label">Telephone</label>
                                <div class="col-md-8">
                                    <input type="text" ng-model="rec.phone" id="Telephone" class="form-control" ng-readonly="check_srm_readonly" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-md-4 control-label">Company Email</label>
                                <div class="col-md-8">
                                    <input type="email" ng-model="rec.email" id="Email" class="form-control" placeholder="info@company.com" ng-readonly="check_srm_readonly">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-md-4 control-label">Fax</label>
                                <div class="col-md-8">
                                    <input type="text" ng-model="rec.fax" id="fax2" class="form-control" ng-readonly="check_srm_readonly" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-md-4 control-label">Web</label>
                                <div class="col-md-8">

                                    <div class="input-symbol">
                                        <!-- condition to create link only in view mode if link exists. -->
                                        <a href='{{rec.web_address}}' ng-if="rec.web_address.length>7 && check_srm_readonly" target='_blank' class="showpointer">
                                            <input type="text" ng-model="rec.web_address" id="web_address" class="form-control" ng-readonly="check_srm_readonly" ng-blur="set_link()" placeholder="https://" />
                                            <span>
                                                <i class="fa fa-external-link-square"
                                                   aria-hidden="true"></i>
                                            </span>
                                        </a>

                                        <!-- condition to not create a link only in view mode if no link exists.  -->
                                        <input type="text" ng-if="(rec.web_address.length==7 || rec.web_address.length==0) && check_srm_readonly" ng-model="rec.web_address" id="web_address" class="form-control" ng-readonly="check_srm_readonly" ng-blur="set_link()" placeholder="https://" />

                                        <!-- condition to not create a link only in Edit mode.  -->
                                        <input type="text" ng-if="!check_srm_readonly" ng-model="rec.web_address" id="web_address" class="form-control" ng-readonly="check_srm_readonly" ng-blur="set_link()" placeholder="https://" />
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-md-4 control-label">Location Type</label>

                                <div class="col-md-8 pl0">
                                    <div class="input-symbol">
                                        <label class="col-md-4">
                                            <input type="checkbox"
                                                   name="a"
                                                   ng-model="rec.is_billing_address"
                                                   ng-disabled="check_srm_readonly"
                                                   id="genis_billing_address"
                                                   ng-checked="rec.is_billing_address > 0"
                                                   class="">&nbsp;Billing</label>

                                        <label class="col-md-4 pl0">
                                            <input type="checkbox"
                                                   name="c"
                                                   ng-model="rec.is_invoice_address"
                                                   ng-disabled="check_srm_readonly"
                                                   id="genis_invoice_address"
                                                   ng-checked="rec.is_invoice_address > 0"
                                                   class=""> &nbsp;Payment</label>

                                        <label class="col-md-4 pl0">
                                            <input type="checkbox"
                                                   name="b"
                                                   ng-model="rec.is_delivery_collection_address"
                                                   ng-disabled="check_srm_readonly"
                                                   id="genis_delivery_collection_address"
                                                   ng-checked="rec.is_delivery_collection_address > 0"
                                                   class="">&nbsp;Collection</label>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-md-4 control-label">Status <span class="required">*</span></label>

                                <div class="col-md-8">

                                    <!--ng-change="show_status_date(drp.status_ids)-->
                                    <ui-select ng-model="drp.status_ids" ng-disabled="check_srm_readonly">
                                        <ui-select-match placeholder="Select Status">{{$select.selected.title}}</ui-select-match>
                                        <ui-select-choices repeat="opt in status_list | filter: $select.search">
                                            <div ng-bind-html="opt.title | highlight: $select.search"></div>
                                        </ui-select-choices>
                                    </ui-select>
                                </div>
                                <!-- <div class="col-md-2 adj-btn">
                                    <button class="btn btn-icon pull-right" type="button" ng-click="historytype('Status')" title="Status History" ng-disabled="check_srm_readonly">
                                        <i class="fa fa-history" aria-hidden="true"></i>
                                    </button>
                                </div> -->
                            </div>
                        </div>
                        <div class="col-md-5 col-md-offset-2">
                            <div class="form-group">
                                <label class="col-md-4 control-label">Purchaser
                                    <!-- Code --> </label>
                                <div class="col-md-8">

                                    <div class="input-symbol">
                                        <input type="text" ng-click="get_empl_list('purchaser_code')" ng-model="rec.purchaser_code" id="purchaser_code" class="form-control" ng-disabled="check_srm_readonly" />
                                        <input type="hidden" ng-model="rec.purchaser_code_id" id="purchaser_code_id" class="form-control" ng-readonly="check_srm_readonly" />
                                        <span>
                                            <i class="fa fa-external-link"></i>
                                        </span>
                                    </div>

                                </div>
                            </div>

                            <div class="form-group">
                                <label class="col-md-4 control-label">Currency <span class="required">*</span> </label>

                                <div class="col-md-8">
                                    <ui-select ng-model="drp.currency" ng-disabled="check_srm_readonly" ng-change="addNewCurrencyPopup(drp)">
                                        <ui-select-match placeholder="Select Currency">{{$select.selected.code}}</ui-select-match>
                                        <ui-select-choices repeat="opt in arr_currency | filter: $select.search">
                                            <div ng-bind-html="opt.code | highlight: $select.search"></div>
                                        </ui-select-choices>
                                    </ui-select>
                                    <!--select2me -->
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="col-md-4 control-label">Segment </label>

                                <div class="col-md-8">
                                    <ui-select ng-model="drp.segment_id" ng-disabled="check_srm_readonly" ng-class="{'not-click-allow':disableClass > 0}">
                                        <ui-select-match placeholder="Select Segment">{{$select.selected.title}}
                                        </ui-select-match>
                                        <ui-select-choices repeat="opt in segment_supplier_arr | filter: $select.search">
                                            <div ng-bind-html="opt.title | highlight: $select.search"></div>
                                        </ui-select-choices>
                                    </ui-select>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="col-md-4 control-label">Territory</label>

                                <div class="col-md-8">
                                    <ui-select ng-model="drp.region_id" ng-disabled="check_srm_readonly" ng-class="{'not-click-allow':disableClass > 0}">
                                        <ui-select-match placeholder="Select Territory">{{$select.selected.title}}
                                        </ui-select-match>
                                        <ui-select-choices repeat="opt in region_supplier_arr | filter: $select.search">
                                            <div ng-bind-html="opt.title | highlight: $select.search"></div>
                                        </ui-select-choices>
                                    </ui-select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-md-4 control-label">Selling Group </label>

                                <div class="col-md-8">
                                    <ui-select ng-model="drp.selling_grp_id" ng-disabled="check_srm_readonly" ng-class="{'not-click-allow':disableClass > 0}">
                                        <ui-select-match placeholder="Select Selling Group">{{$select.selected.title}}
                                        </ui-select-match>
                                        <ui-select-choices repeat="opt in selling_group_arr | filter: $select.search">
                                            <div ng-bind-html="opt.title | highlight: $select.search"></div>
                                        </ui-select-choices>
                                    </ui-select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-md-4 control-label"> Classification</label>
                                <div class="col-md-8">
                                    <ui-select ng-model="drp.srm_classification" ng-disabled="check_srm_readonly || disable_classification">
                                        <ui-select-match placeholder="Select Classification">{{$select.selected.title}}</ui-select-match>
                                        <ui-select-choices ui-disable-choice="opt.title =='Supplier'" repeat="opt in arr_srm_classification | filter: $select.search">
                                            <div ng-bind-html="opt.title | highlight: $select.search"></div>
                                        </ui-select-choices>
                                    </ui-select>
                                </div>
                            </div>

                            <div class="form-group" ng-show="status_change_date>0">
                                <label class="col-md-4 control-label "> Status Change Date </label>

                                <div class="col-md-8">
                                    <input jqdatepicker class="2date-picker form-control " ng-model="rec.status_date" readonly>
                                    <span class="fa fa-calendar  new_ca  form-control-feedback"></span>
                                </div>
                            </div>
                            <div class="form-group" style="margin-bottom: 0 !important;">
                                <label class="col-md-4 control-label">Social Media</label>
                                <div class="col-md-8">
                                    <x-dynamic-select lookup-table="social_medias_general_form" fields="socialMediasGeneral" property-name="srmSM" qty="{{qty}}" default-option-index="{{defaultOption}}" read-only="check_srm_readonly">
                                    </x-dynamic-select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-md-4 control-label">Additional Information</label>
                                <div class="col-md-8">
                                    <input type="text" maxlength="250" ng-model="rec.additionalInformation" id="additionalInformation" class="form-control" ng-readonly="check_srm_readonly" />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-12 affix">
                    <div class="pull-left">
                        <!-- <div class="communication">
                            <sidebar-notes ng-if="noRoleAssigned !=1" class="noselect"></sidebar-notes>
                            <sidebar-email ng-if="noRoleAssigned !=1" class="noselect"></sidebar-email>
                            <sidebar-attachment ng-if="noRoleAssigned !=1" class="noselect"></sidebar-attachment>
                        </div> -->
                    </div>
                    <div class="pull-right">
                        <div class="dropdown ib" ng-show="rec.id>0 &&  srm_general_tab_module>0" ng-click="set_document_internal(srm_general_tab_module)">
                            <button class="dte-btn dropdown-toggle" type="button" data-toggle="dropdown">
                                <i class="dte-ico"></i>
                            </button>
                            <ul class="dropdown-menu dte animated fadeIn">
                                <span ng-click="set_document_internal(crm_general_tab_module)">
                                    <i class="fa fa-file-text-o"
                                       aria-hidden="true"></i> Add Document
                                </span>
                                <span>
                                    <i class="fa fa-check"
                                       aria-hidden="true"></i> Add Task
                                </span>
                                <span>
                                    <i class="fa fa-envelope-o"
                                       aria-hidden="true"></i> Compose Email
                                </span>
                            </ul>
                        </div>

                        <button class="btn btn-default2 active-btns" ng-show="rec.type==1" ng-if="allowconvert_srm_general_tab" type="button" ng-click="convert(rec.id)" ng-disabled="!check_srm_readonly"> Convert to Supplier
                        </button>
                        <button class="btn btn-delete active-btns" type="button" ng-show="rec.id>0 &&  allowdelete_srm_general_tab==1 && !check_srm_readonly" ng-click="delete()">
                            Delete
                        </button>
                        <button class="btn btn-submit pic_block" type="submit" ng-show="!check_srm_readonly && (allowadd_srm_general_tab || allowedit_srm_general_tab)">
                            <i class="fa fa-check fa_display"></i> Save
                        </button>
                        <button class="btn btn-edit" type="button" ng-click="showEditForm()" ng-show="check_srm_readonly && allowedit_srm_general_tab">
                            <i class="fa fa-edit fa_display"></i> Edit
                        </button>
                        <button class="btn btn-cancel" type="button" ui-sref="app.srm()">
                            <i class="fa fa-undo fa_display"></i> Cancel
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="panel panel-default padb0">
            <!-- <div class="panel-heading">
                    <h3 class="panel-title" style="padding-left:14px;" data-toggle="collapse" data-target="#collapseExample" aria-expanded="false"
                        aria-controls="collapseExample">
                        <div class="panel-title-hover">Primary Contact Details
                            <i class="fa fa-caret-right collapseicon" ng-if="rec.contactCollapse==true"></i>
                            <i class="fa fa-caret-down collapseicon" ng-if="rec.contactCollapse==false"></i>
                        </div>
                    </h3>
                </div> -->
            <!-- ng-class="{'in' : rec.contactCollapse==false , 'collapse' : rec.contactCollapse == true}" id="collapseExample" -->
            <div class="panel-body">
                <div class="col-md-5">
                    <div class="form-group">
                        <label class="col-md-4 control-label">Primary Contact Name
                            <span ng-if="rec.cjob_title.length>0 || rec.cdirect_line.length>0 || rec.cdirect_line>0 || rec.cmobile.length>0 ||
                                rec.cemail.length>0 || rec.cphone.length>0 || rec.cfax.length>0 || drp.pref_mthod_of_comm || rec.cbooking_instructions.length>0 || 
                                (socialMediasContactGeneral.SRMprimaryContactSM.length>0 && (socialMediasContactGeneral.SRMprimaryContactSM[0].value ||
                                socialMediasContactGeneral.SRMprimaryContactSM[1].value || socialMediasContactGeneral.SRMprimaryContactSM[2].value ||
                                socialMediasContactGeneral.SRMprimaryContactSM[3].value || socialMediasContactGeneral.SRMprimaryContactSM[4].value))"
                                  class="required">*</span>
                        </label>

                        <div class="col-md-8">
                            <input type="text" ng-model="rec.contact_person" id="contact_person" class="form-control" ng-readonly="check_srm_readonly" ng-required="rec.cjob_title.length>0 || rec.cdirect_line.length>0 || 
                                       rec.cdirect_line>0 || rec.cmobile.length>0 || rec.cemail.length>0 || rec.cphone.length>0 || rec.cfax.length>0 || 
                                       drp.pref_mthod_of_comm || rec.cbooking_instructions.length>0 || 
                                       (socialMediasContactGeneral.SRMprimaryContactSM.length>0 && (socialMediasContactGeneral.SRMprimaryContactSM[0].value ||
                                        socialMediasContactGeneral.SRMprimaryContactSM[1].value || socialMediasContactGeneral.SRMprimaryContactSM[2].value ||
                                        socialMediasContactGeneral.SRMprimaryContactSM[3].value || socialMediasContactGeneral.SRMprimaryContactSM[4].value))" />
                            <input type="hidden" ng-model="rec.alt_contact_id" id="alt_contact_id" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-4 control-label">Job Title </label>

                        <div class="col-md-8">
                            <input type="text" ng-model="rec.cjob_title" id="job_title" class="form-control" ng-readonly="check_srm_readonly" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-4 control-label">Direct Line </label>

                        <div class="col-md-8">
                            <input type="text" ng-model="rec.cdirect_line" placeholder="Direct Line" id="direct_line" class="form-control" ng-readonly="check_srm_readonly" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-4 control-label">Mobile </label>

                        <div class="col-md-8">
                            <input type="text" ng-model="rec.cmobile" id="mobile" placeholder="Mobile" class="form-control" ng-readonly="check_srm_readonly" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-4 control-label">Telephone </label>

                        <div class="col-md-8">
                            <input type="text" ng-model="rec.cphone" id="cTelephone" class="form-control" ng-readonly="check_srm_readonly" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-4 control-label">Fax </label>

                        <div class="col-md-8">
                            <input type="text" ng-model="rec.cfax" id="fax" class="form-control" ng-readonly="check_srm_readonly" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-4 control-label">Email </label>

                        <div class="col-md-8">
                            <div class="input-symbol">
                                <input type="text" ng-model="rec.cemail" id="email" data-parsley-type="email" name="email" class="form-control" ng-readonly="check_srm_readonly" placeholder="e.g. myname@example.com" data-email-msg="Email format is not valid" />

                                <span>
                                    <a ng-if="rec.cemail != undefined"
                                       href="mailto:{{rec.cemail}}?Subject=silverow CRM&Body=silverow CRM">
                                        <i style=" color: #3693cf;"
                                           class="fa fa-envelope-o"
                                           aria-hidden="true"> </i>
                                    </a>
                                </span>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="col-md-5 col-md-offset-2">
                    <div class="form-group">
                        <label class="col-md-4 control-label" title="Preferred Method Of Communication">Pref. Method Of Comm.</label>

                        <div class="col-md-8">
                            <ui-select ng-model="drp.pref_mthod_of_comm" ng-change="addNewPredefinedPopup(drp.pref_mthod_of_comm, 'PREFER_METHOD', 'Preferred Method Of Communication', drp)" ng-disabled="check_srm_readonly" ng-class="{'not-click-allow':disableClass > 0}">
                                <ui-select-match placeholder="Prefer Method Of Communication">{{$select.selected.title}}</ui-select-match>
                                <ui-select-choices repeat="opt in arr_pref_method_comm | filter: $select.search">
                                    <div ng-bind-html="opt.title | highlight: $select.search"></div>
                                </ui-select-choices>
                            </ui-select>
                        </div>
                    </div>


                    <div class="form-group" ng-if="rec.totalLocAssigned>0">
                        <label class="col-md-4 control-label">Assigned Location(s)</label>

                        <div class="col-md-2">
                            <button style=" line-height: 18px;" class="btn btn-icon pull-right" type="button" ng-click="getGenAssinLoc(rec.alt_contact_id)" title="Total Record: {{rec.totalLocAssigned}} ">
                                <span ng-if="!loadingprimaryLocModal">{{rec.totalLocAssigned}}</span>
                                <span class="fa fa-spinner fa-spin text-center"
                                      ng-if="loadingprimaryLocModal"></span>
                            </button>
                        </div>
                    </div>
                    <div class="form-group" style="margin-bottom: 0 !important;">
                        <label class="col-md-4 control-label">Social Media</label>
                        <div class="col-md-8">
                            <x-dynamic-select lookup-table="social_medias_contact_form" fields="socialMediasContactGeneral" property-name="SRMprimaryContactSM" qty="{{qty}}" default-option-index="{{defaultOption}}" read-only="check_srm_readonly">
                            </x-dynamic-select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-4 control-label">Primary Contact Notes</label>

                        <div class="col-md-8">
                            <textarea style="height:100px !important; resize:none; " ng-model="rec.primaryc_notes" id="cnotes" class="form-control" ng-disabled="check_srm_readonly" maxlength="250" />
                            </textarea>
                            <!-- <span class="word-counter">{{rec.cbooking_instructions.length}}/100</span>-->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div ng-include="'app/views/crm/history_modal.html'"></div>
<!-- <div ng-include="'app/views/srm/_srm_purcaser_popup.html'"></div> -->